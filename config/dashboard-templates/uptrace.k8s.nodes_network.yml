schema: v2
name: 'K8s: Nodes network'

table:
  metrics:
    - k8s_node_network_io as $io
    - k8s_node_network_errors as $errors
  query:
    - group by k8s_node_name
    - group by interface
    - per_min($io{direction=receive}) as net_receive
    - per_min($io{direction=transmit}) as net_transmit
    - per_min($errors)
  columns:
    net_receive:
      unit: bytes
    net_transmit:
      unit: bytes

grid_rows:
  - title: General
    items:
      - title: Network IO
        chart: line
        metrics:
          - k8s_node_network_io as $io
        query:
          - per_min($io)
          - group by direction
        columns:
          per_min($io):
            unit: bytes

      - title: Network errors
        chart: line
        metrics:
          - k8s_node_network_errors as $errors
        query:
          - per_min($errors)
